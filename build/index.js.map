{"version":3,"sources":["index.ts","packages/zlib@0.0.0","packages/fs@0.0.0","packages/querystring@0.0.0","packages/stream@0.0.0","packages/buffer@5.0.2","packages/base64-js@1.2.0","packages/ieee754@1.1.8","packages/http@0.0.0","packages/os@0.0.0","packages/process@0.0.0"],"names":[],"mappings":"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;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/qDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"","sourcesContent":["const zlib = require('zlib')\n\t, fs = require('fs')\n\t, qs = require('querystring')\n\t, stream = require('stream')\n\t, Buffer = require('buffer').Buffer\n\t, { model, hamt, obs, worker, cof, cob, curry, batch, c, concatter, filtering, mapping, pf, rAF, vdom } = require('clan-fp')\n\nconst log = (...a) => console.log(...a)\n\n// cookie middleware\nexport const cookie = context => {\n\tconst c = (key=undefined, val=undefined) => {\n\t\t\tlet {headers={}} = context.req\n\t\t\t\t, {cookie=''} = headers\n\t\t\t\t, ck = cookie\n\t\t\t\t\t.split(';')\n\t\t\t\t\t.map(c => c.trim())\n\t\t\t\t\t.filter(c => c.length !== 0)\n\t\t\t\t\t.reduce((acc, c) => {\n\t\t\t\t\t\tlet [key,val] = c.split('=').map(c => c.trim())\n\t\t\t\t\t\tacc[key] = val\n\t\t\t\t\t\treturn acc\n\t\t\t\t\t}, {})\n\n\t\t\tif(key !== undefined) {\n\t\t\t\tif(val === undefined) delete ck[key]\n\t\t\t\telse ck[key] = val\n\n\t\t\t\tcontext.res.setHeader('Set-Cookie', Object.keys(ck).map(k => `${k}=${ck[k]}`))\n\t\t\t}\n\t\t\treturn ck\n\t\t}\n\t\t, clearCookie = () => context.res.setHeader('Set-Cookie', '')\n\n\treturn Object.assign({}, context, {cookie: c, clearCookie})\n}\n\n// send gzipped file\nexport const sendFile = context => {\n\tconst s = file => {\n\t\tconst {req, res} = context\n\t\tres.statusCode = 200\n\t\taddMIME(file, res)\n\t\tfile instanceof Buffer\n\t\t\t? streamable(file).pipe(zlib.createGzip()).pipe(res)\n\t\t\t: fs.createReadStream(file).pipe(zlib.createGzip()).pipe(res)\n\t}\n\n\treturn Object.assign({}, context, {sendFile: s})\n}\n\n// benchmark handler\nexport const benchmark = message => context => {\n\tlet before = +new Date\n\tcontext.res.on('finish', () => {\n\t\tlet after = +new Date\n\t\tconsole.log(req.url + ' --- ' + (message ? message+':' : '', after-before+'ms'))\n\t})\n\treturn context\n}\n\n// parse data streams from req body\nexport const body = (ctx) => {\n\tctx.body = new Promise((res,rej) => {\n\t\tlet {req} = ctx\n\t\tlet buf = ''\n\t\treq.setEncoding('utf8')\n\t\treq.on('data', c => buf += c)\n\t\treq.on('end', _ => {\n\t\t\tctx.body = () => Promise.Resolve(buf)\n\t\t\tres(buf)\n\t\t})\n\t})\n\treturn ctx\n}\n\nconst streamable = buf => {\n    let i = 0\n    \t, s = buf.toString()\n    \t, x = new stream.Readable({\n\t    \tread(size) {\n\t    \t\tif(i < s.length) {\n\t\t    \t\tthis.push(s.slice(i,i+size))\n\t\t    \t\ti = i+size\n\t\t    \t} else {\n\t\t    \t\tthis.push(null)\n\t\t    \t}\n\t    \t}\n\t    })\n    return x\n}\n\n// send gzipped response middleware\nexport const send = context => {\n\tconst { req, res } = context\n\t\t, e = req.headers['accept-encoding'] || ''\n\t\t, s = (buffer, code=200) => {\n\t\t\tif(typeof buffer === 'number') {\n\t\t\t\tres.statusCode = buffer\n\t\t\t\treturn res.end('')\n\t\t\t} else {\n\t\t\t\tres.statusCode = code\n\t\t\t}\n\n\t\t\tif(!(buffer instanceof Buffer))\n\t\t\t\tbuffer = Buffer.from(typeof buffer === 'object' ? JSON.stringify(buffer) : buffer)\n\n\t\t\tbuffer = streamable(buffer)\n\n\t\t\tif(e.match(/gzip/)) {\n\t\t\t\tres.setHeader('content-encoding', 'gzip')\n\t\t\t\tbuffer.pipe(zlib.createGzip()).pipe(res)\n\t\t\t} else if(e.match(/deflate/)) {\n\t\t\t\tres.setHeader('content-encoding', 'deflate')\n\t\t\t\tbuffer.pipe(zlib.createDeflate()).pipe(res)\n\t\t\t} else {\n\t\t\t\tbuffer.pipe(res)\n\t\t\t}\n\t\t}\n\n\treturn Object.assign({}, context, {send: s})\n}\n\n// routing middleware\nexport const route = type => (url, action) => context => {\n\tif(context.__handled || context.res.headersSent || context.req.method.toLowerCase() !== type) return\n\n\tconst {req, res} = context\n\t\t, reggie = url.replace(/\\/\\{((\\w*)(\\??))\\}/ig, '\\/?(\\\\w+$3)')\n\t\t, r = RegExp(`^${reggie}$`)\n\t\t, i = req.url.indexOf('?')\n\t\t, v = r.exec(i === -1 ? req.url : req.url.slice(0,i))\n\n\tif(!!v) {\n\t\tcontext.__handled = true\n\n\t\tconst params = v.slice(1)\n\t\t\t, query = qs.parse(req.url.slice(i+1))\n\n\t\taction(Object.assign({}, context, {params, query}))\n\t}\n\n\treturn context\n}\nexport const get = route('get')\nexport const put = route('put')\nexport const post = route('post')\nexport const del = route('delete')\nexport const patch = route('patch')\n\n// static file serving async-middleware\nexport const serve = (folder='./', route='/') => context => {\n\tconst {req, res} = context\n\t\t, {url} = req\n\t\t, q = url.indexOf('?')\n\t\t, hash = url.indexOf('#')\n\t\t, _url = url.slice(0, q !== -1 ? q : (hash !== -1 ? hash : undefined))\n\t\t, filepath = `${process.cwd()}/${folder}/${_url.slice(1).replace(new RegExp(`/^${route}/`,`ig`), '')}`.replace(/\\/\\//ig, '/')\n\t\t, e = req.headers['accept-encoding'] || ''\n\n\treturn new Promise((y, n) =>\n\t\tfs.stat(filepath, (err, stats) => {\n\t\t\tif(!err && stats.isFile()){\n\t\t\t\taddMIME(_url, res)\n\n\t\t\t\tif(e.match(/gzip/)) {\n\t\t\t\t\tres.setHeader('content-encoding', 'gzip')\n\t\t\t\t\tfs.createReadStream(filepath).pipe(zlib.createGzip()).pipe(res)\n\t\t\t\t} else if(e.match(/deflate/)) {\n\t\t\t\t\tres.setHeader('content-encoding', 'deflate')\n\t\t\t\t\tfs.createReadStream(filepath).pipe(zlib.createDeflate()).pipe(res)\n\t\t\t\t} else {\n\t\t\t\t\tfs.createReadStream(filepath).pipe(res)\n\t\t\t\t}\n\n\t\t\t\tn(context)\n\t\t\t} else {\n\t\t\t\ty(context)\n\t\t\t}\n\t\t}))\n}\n\nconst addMIME = (url, res, type) => {\n\turl.match(/\\.js$/) && res.setHeader('Content-Type', 'text/javascript')\n\turl.match(/\\.json$/) && res.setHeader('Content-Type', 'application/json')\n\turl.match(/\\.pdf$/) && res.setHeader('Content-Type', 'application/pdf')\n\turl.match(/\\.html$/) && res.setHeader('Content-Type', 'text/html')\n\turl.match(/\\.css$/) && res.setHeader('Content-Type', 'text/css')\n\n\turl.match(/\\.jpe?g$/) && res.setHeader('Content-Type', 'image/jpeg')\n\turl.match(/\\.png$/) && res.setHeader('Content-Type', 'image/png')\n\turl.match(/\\.gif$/) && res.setHeader('Content-Type', 'image/gif')\n}\n\nexport const server = (pipe, port=3000, useCluster=false) => {\n\tconst http = require('http')\n\n\tif(!useCluster)\n\t\treturn http\n\t\t\t.createServer((req, res) => pipe({req, res}))\n\t\t\t.listen(port, (err) =>\n\t\t\terr\n\t\t\t\t&& console.error(err)\n\t\t\t\t|| console.log(`Server running at :${port} on process ${process.pid}`))\n\n\tconst cluster = require('cluster')\n\t\t, numCPUs = require('os').cpus().length\n\n\tif (cluster.isMaster) {\n\t\tfor (var i = 0; i < numCPUs; i++) cluster.fork()\n\t\tcluster.on('exit', (worker, code, signal) =>\n\t\t\tconsole.log(`worker ${worker.process.pid} died`))\n\t} else {\n\t\tconst s = http.createServer((req, res) => pipe({req, res}))\n\t\ts.listen(port, (err) =>\n\t\t\terr\n\t\t\t\t&& console.error(err)\n\t\t\t\t|| console.log(`Server running at :${port} on process ${process.pid}`))\n\t}\n}\n\nexport const http = server",null,null,null,null,null,null,null,null,null,null]}